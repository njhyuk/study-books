# 코드 정리 시점

코드 정리를 먼저할까, 동작 변경을 먼저 할까?

## 아예 안 한다면

* 코드의 동작이 앞으로 바뀌지 않을 거라는 믿음
* 실제로 일어나는 경우가 있음, 합리적인 선택일 수도 있음

## 나중에 정리하기

* 시간이 충분하다면 어떻게 일할 것인가? 라고 스스로 물어보기
* 실제로 하는 일과 크게 다르다면, 시간이 충분하지 않다는 뜻
* 엉망인 코드 목록 만들기 (재미목록)
  * 기능구현을 할 때 허우적 거리기 보다, 재미 목록 훑기
  * 시간이 남을때, 가장 쉬워보이는 재미목록 하나씩 하기 
* 정리를 나중에 하면 몇가지 다른 방식으로 가치를 창출함
  * 지저분함 보유세
    * 신규 API로 교체하는 경우
    * 변경을 모두 완료한 후에는 이전 API를 제거해도 됨
    * 그 전까지는 새 API와 기존 API를 함께 변경해야함
* 호출하는 모든 코드를 정리하는 일은 무의미 하지 않음
  * 당장 신발 안에 든 작은 돌을 빼내면, 걸음을 더 잘 걸을 수 있음
* 코드 정리를 나중에 원할 때 하면 더 의욕적이고 기분도 좋음

## 동작 변경 후에 코드 정리

* 동작 변경을 해야 하는데 코드가 지저분함
* 일단 동작 변경
  * 그 후에 변경을 쉽게 하는법을 알게됨
  * 이제 코드 정리를 해야할까?
* 상황에 따라 다르다
  * 방금 변경한 동작 변경 이후에 또 동작 변경이 있을까?
    * 그럴 가능성이 높다.
    * 그렇다면 동작 변경 후 코드 정리는 의미가 있다.
  * 다음에 동작변경을 할때, 코드 정리부터 먼저 할까?
    * 나중에 가면 정리하는 일이 더 힘듬
    * 지금은 맥락을 알아서 쉽게 정리
* 정리는 어느정도 해야할까?
  * 동작 변경에 한시간이 걸렸다 -> 코드 정리도 한시간
  * 코드 정리가 일주일 걸린다면 재미 목록에 추가
* 다음의 경우엔 동작 변경 후 코드 정리
  * 방금 고친 코드를 다시 변경할 예정일 때
  * 지금 정리하는 것이 더 저렴할 때
  * 코드 정리하는 데 드는 시간이 동작 변경에 드는 시간과 거의 비슷할 때

## 코드 정리 후에 동작 변경

코드 정리를 선행해야 할까? 정답은... 상황에 따라 다르다.

* 코드를 정리한다고 해서 더 쉬워지지 않는다면 먼저 정리 X
* 코드를 정리한다면 더 빨리 이해할 수 있겠다고 판단이 서면 먼저 정리 O
* 코드를 딱 한번만 변경할 예정이면 보류, 코드 정리로 몇년간 매주 행복해지면 먼저
* 내가 지금 혼란스럽다 -> "여기를 정리하면 이해하기 쉬워질꺼야" 힌트 얻기

일반적으로 코드 정리 먼저하는걸 선호, 정리 그 자체가 목적이 되지 않도록 경계해야 한다.

## 요약 

* 코드정리 금지
  * 앞으로 다시 코드 변경 X
  * 설계를 개선해도 배울것 X
* 나중에 정리
  * 코드정리 분량이 많은데 즉시보상은 X
  * 코드 정리에 대한 보상이 잠재적
  * 작은 묶음으로 여러번에 나눠서 코드 정리 가능
* 동작 변경 후 즉시 정리
  * 다음 코드 정리까지 기다릴수록 비용이 더 불어날 떄
  * 코드 정리를 하지 않으면 일을 끝낸거 같지 않을 때
* 코드 정리 후 동작 변경
  * 코드를 정리할때 즉각 효과가 있을때 (코드 이해와 동작변경 쉬워짐)
  * 어떤 코드를 어떻게 정리해야 할지 알 때
